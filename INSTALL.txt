                                    Roundup
                                    =======

Installation
===============
These instructions work on redhat 6.2 and mandrake 8.0 - with the caveat
that these systems don't come with python 2.0 or newer installed, so you'll
have to upgrade python before this stuff will work.


Prerequisites
-------------
Either:
 . Python 2.0 with pydoc installed. See http://www.lfw.org/ for pydoc.
or
 . Python 2.1

You will need either the anydbm or bsddb module.


Testing the Software
--------------------

Run "python -c 'import test;test.go()'" and make sure there's no errors.
If there are errors, please let us know!


Installing the Software
-----------------------

1. Run:

      python setup.py install

   If you would prefer the scripts installed in somewhere other than
   /usr/local/bin, add "--install-scripts=<dir>" to the command:

      python setup.py install --install-scripts=<dir>

   The command:

      python setup.py install --help

   gives all the options available for installation.



Initial Setup
=============

The following instructions assume that you have installed roundup. If you
haven't, you may still proceed - just preface all commands with "./"
ie. "./roundup-admin init".


Instance
--------
Run "roundup-admin init". This initialises a roundup instance.

Roundup is configurable using a localconfig.py file in the instance home.
It may have the following variable declarations:
  
  MAILHOST - The SMTP mail host that roundup will use to send mail
  MAIL_DOMAIN - The domain name used for email addresses

Any further configuration should be possible by editing the instance home's
__init__.py directly.

The email addresses used by the system by default are:

  issue_tracker@MAIL_DOMAIN  - submissions of issues
  roundup-admin@MAIL_DOMAIN  - roundup's internal use (problems, etc)


Note:
We run the instance as group "issue_tracker" and add the mail and web user
("mail" and "apache" on our RedHat 7.1 system) to that group, as well as
any admin people.


Mail
----
Set up a mail alias called "issue_tracker" as:
  "|/usr/bin/python /usr/local/bin/roundup-mailgw <instance_home>"

In some installations (e.g. RedHat 6.2 I think) you'll need to set up smrsh
so sendmail will accept the pipe command. In that case, symlink
/etc/smrsh/roundup-mailgw to /usr/local/bin/roundup-mailgw and change the
command to:
  "|roundup-mailgw <instance_home>"

To test the mail gateway on unix systems, try:

  echo test |mail -s '[issue] test' issue_tracker@your.domain



Web Interface
-------------
This software will work through apache or stand-alone.

Stand-alone:
 1. Edit roundup-server at the top - ROUNDUP_INSTANCE_HOMES needs to know
    about your instance.
 2. "roundup-server [hostname port]"   (hostname may be "")
 3. Load up the page "/<instance name>/index" where instance name is the
    name you nominated in ROUNDUP_INSTANCE_HOMES.

Apache:
 1. Make sure roundup.cgi is executable. Edit it at the top -
    ROUNDUP_INSTANCE_HOMES needs to know about your instance.
 2. Edit your /etc/httpd/conf/httpd.conf and make sure that the
    /home/httpd/html/roundup/roundup.cgi script will be treated as a CGI
    script.
 3. Add the following to your /etc/httpd/conf/httpd.conf:
------8<------- snip here ------8<-------
RewriteEngine on
RewriteCond %{HTTP:Authorization} ^(.*)
RewriteRule ^/roundup/roundup.cgi(.*) /home/httpd/html/roundup/roundup.cgi$1 [e=HTTP_CGI_AUTHORIZATION:%1,t=application/x-httpd-cgi,l]
------8<------- snip here ------8<-------
   note: the RewriteRule must be on one line - no breaks
 4. Re-start your apache to re-load the config
 5. Load up the page "/roundup/roundup.cgi/<instance name>/index" where
    instance name is the name you nominated in ROUNDUP_INSTANCE_HOMES.


