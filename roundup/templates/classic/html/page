<html tal:define="title request/description">
<head>
<title tal:content="title">title goes here</title>

<link rel="stylesheet" type="text/css" href="_file/style.css">

<script tal:replace="structure request/base_javascript">
</script>

</head>
<body class="body" marginwidth="0" marginheight="0">

<table class="body">

<tr>
 <td class="page-header-left">&nbsp;</td>
 <td class="page-header-top">
  <h2 tal:content="title">name</h2>
 </td>
</tr>

<tr>
 <td rowspan="2" valign="top" nowrap class="sidebar">
  <p class="classblock" tal:condition="request/user/queries">
   <b>Your Queries</b><br>
   <a tal:repeat="qs request/user/queries"
      tal:attributes="href python:'%s%s'%(qs['klass'], qs['url'])"
      tal:content="qs/name">link</a>
  </p>

  <p class="classblock"
       tal:condition="python:request.user.hasPermission('View', 'issue')">
   <b>Issues</b><br>
   <a tal:condition="python:request.user.hasPermission('Edit', 'issue')"
      href="issue?:template=item">New Issue<br></a>
   <a href="issue?:sort=-activity&:group=priority&:filter=status,assignedto&:columns=id,activity,title,creator,status&status=-1,1,2,3,4,5,6,7&assignedto=-1">Unassigned Issues</a><br>
   <a href="issue?:sort=-activity&:group=priority&:filter=status&:columns=id,activity,title,creator,assignedto,status&status=-1,1,2,3,4,5,6,7">All Issues</a><br>
   <a href="issue?:template=search">Search Issues</a>
  </p>

  <p class="classblock"
       tal:condition="python:request.user.hasPermission('Edit', None)">
   <b>Admin</b><br>
   <a href="home?:template=classlist">Class List</a><br>
   <a href="user">User List</a><br>
   <a href="user?:template=item">Add User</a>
  </p>

  <p class="userblock" tal:condition="python:request.user.username=='anonymous'">
   <form method="POST" action="">
    <input size="10" name="__login_name"><br>
    <input size="10" type="password" name="__login_password"><br>
    <input type="submit" name=":action" value="login">
    <span tal:replace="structure request/indexargs_form" />
   </form>
   <a href="user?:template=register">Register</a>
  </p>
   
  <p class="userblock" tal:condition="python:request.user.username != 'anonymous'">
   <b>Hello,</b><br><b tal:content="request/user/username">username</b><br>
   <a tal:attributes="href string:issue?:sort=-activity&:group=priority&:filter=status,assignedto&:columns=id,activity,title,creator,status&status=-1,1,2,3,4,5,6,7&assignedto=${request/user/id}">My Issues</a><br>
   <a tal:attributes="href string:user${request/user/id}">My Details</a><br>
   <a tal:attributes="href python:request.indexargs_href(request.url,
       {':action':'logout'})">Logout</a>
  </p>
 </td>
 <td>
  <p tal:condition="options/error_message | nothing" class="error-message"
     tal:repeat="m options/error_message" tal:content="structure m">error</p>
  <p tal:condition="options/ok_message | nothing" class="ok-message"
     tal:repeat="m options/ok_message" tal:content="structure m">error</p>
 </td>
</tr>
<tr>
 <td width="100%" valign="top" tal:content="structure content" class="content">
   The page content goes here.
 </td>
</tr>

</table>

<pre tal:condition="request/form/debug | nothing" tal:content="request">
</pre>

</body>
</html>
